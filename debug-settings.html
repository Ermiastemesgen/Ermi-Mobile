<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Settings - Railway</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 50px; }
        .result { background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0; }
        button { padding: 10px 20px; background: #2563eb; color: white; border: none; border-radius: 4px; cursor: pointer; }
        pre { background: #1f2937; color: #f9fafb; padding: 15px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üîç Debug Settings on Railway</h1>
    
    <button onclick="testSettingsAPI()">Test Settings API</button>
    <button onclick="testAboutText()">Test About Text Loading</button>
    
    <div id="results"></div>

    <script>
        const API_URL = window.location.origin + '/api';

        async function testSettingsAPI() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<p>Testing settings API...</p>';

            try {
                const response = await fetch(API_URL + '/settings');
                const data = await response.json();
                
                resultsDiv.innerHTML = `
                    <div class="result">
                        <h3>‚úÖ Settings API Response:</h3>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                        <p><strong>About Text:</strong> ${data.settings?.about_text || 'NOT FOUND'}</p>
                    </div>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="result">
                        <h3>‚ùå Settings API Error:</h3>
                        <pre>${error.message}</pre>
                    </div>
                `;
            }
        }

        async function testAboutText() {
            const resultsDiv = document.getElementById('results');
            
            try {
                // Test the same logic as main page
                const response = await fetch(API_URL + '/settings');
                const data = await response.json();
                const settings = data.settings;
                
                let result = '<div class="result"><h3>üß™ About Text Test:</h3>';
                
                if (settings.about_text) {
                    result += `<p>‚úÖ <strong>About text found:</strong></p><pre>${settings.about_text}</pre>`;
                    result += `<p><strong>Length:</strong> ${settings.about_text.length} characters</p>`;
                } else {
                    result += `<p>‚ùå <strong>About text NOT found in settings</strong></p>`;
                    result += `<p>Available settings keys: ${Object.keys(settings).join(', ')}</p>`;
                }
                
                result += '</div>';
                resultsDiv.innerHTML = result;
                
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="result">
                        <h3>‚ùå Test Error:</h3>
                        <pre>${error.message}</pre>
                    </div>
                `;
            }
        }

        // Auto-run tests
        window.addEventListener('load', () => {
            setTimeout(testSettingsAPI, 1000);
        });
    </script>
</body>
</html>